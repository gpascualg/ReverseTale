diff --git a/CMakeLists.txt b/CMakeLists.txt
index 695f64c..f21b514 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -48,7 +48,7 @@ set(CMAKE_MACOSX_RPATH 1)
 
 # Add in our modules, we write FindX modules for libbson and libmongoc
 # since they don't currently install them.
-set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake/")
+set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${PROJECT_SOURCE_DIR}/cmake/")
 
 # Enforce the C++ standard, and disable extensions
 if(NOT DEFINED CMAKE_CXX_STANDARD)
@@ -64,7 +64,7 @@ include(InstallRequiredSystemLibraries)
 # If the user did not customize the install prefix,
 # set it to live under build so we don't inadverently pollute /usr/local
 if(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)
-    set (CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}/install" CACHE PATH "default install path" FORCE)
+    set (CMAKE_INSTALL_PREFIX "${PROJECT_BINARY_DIR}/install" CACHE PATH "default install path" FORCE)
 endif()
 
 if(NOT CMAKE_BUILD_TYPE)
@@ -80,12 +80,12 @@ add_custom_target(docs
 )
 
 add_custom_target(format
-    python ${CMAKE_SOURCE_DIR}/etc/clang_format.py format
+    python ${PROJECT_SOURCE_DIR}/etc/clang_format.py format
     VERBATIM
 )
 
 add_custom_target(format-lint
-    python ${CMAKE_SOURCE_DIR}/etc/clang_format.py lint
+    python ${PROJECT_SOURCE_DIR}/etc/clang_format.py lint
     VERBATIM
 )
 
diff --git a/examples/CMakeLists.txt b/examples/CMakeLists.txt
index 884da09..5d44cbd 100644
--- a/examples/CMakeLists.txt
+++ b/examples/CMakeLists.txt
@@ -35,12 +35,12 @@ add_custom_target(run-examples DEPENDS examples)
 
 # Run all mongocxx examples on `make run-examples`.
 foreach(EXAMPLE ${MONGOCXX_EXAMPLE_EXECUTABLES})
-    get_filename_component(EXAMPLE_EXECUTABLE "${CMAKE_BINARY_DIR}/examples/mongocxx/${EXAMPLE}" ABSOLUTE)
+    get_filename_component(EXAMPLE_EXECUTABLE "${PROJECT_BINARY_DIR}/examples/mongocxx/${EXAMPLE}" ABSOLUTE)
     add_custom_command(TARGET run-examples POST_BUILD COMMAND ${EXAMPLE_EXECUTABLE})
 endforeach(EXAMPLE)
 
 # Run all bsoncxx examples on `make run-examples`.
 foreach(EXAMPLE ${BSONCXX_EXAMPLE_EXECUTABLES})
-    get_filename_component(EXAMPLE_EXECUTABLE "${CMAKE_BINARY_DIR}/examples/bsoncxx/${EXAMPLE}" ABSOLUTE)
+    get_filename_component(EXAMPLE_EXECUTABLE "${PROJECT_BINARY_DIR}/examples/bsoncxx/${EXAMPLE}" ABSOLUTE)
     add_custom_command(TARGET run-examples POST_BUILD COMMAND ${EXAMPLE_EXECUTABLE})
 endforeach(EXAMPLE)
diff --git a/src/bsoncxx/CMakeLists.txt b/src/bsoncxx/CMakeLists.txt
index 7a38a89..593e00c 100644
--- a/src/bsoncxx/CMakeLists.txt
+++ b/src/bsoncxx/CMakeLists.txt
@@ -64,7 +64,12 @@ set(BSONCXX_HEADER_INSTALL_DIR "include/bsoncxx/${BSONCXX_INLINE_NAMESPACE}" CAC
 
 set(LIBBSON_REQUIRED_VERSION 1.3.2)
 set(LIBBSON_REQUIRED_ABI_VERSION 1.0)
-find_package(LibBSON ${LIBBSON_REQUIRED_VERSION} REQUIRED)
+#find_package(LibBSON ${LIBBSON_REQUIRED_VERSION} REQUIRED)
+set(LIBBSON_INCLUDE_DIRS
+    ${CMAKE_SOURCE_DIR}/dep/libbson/src/bson
+    ${CMAKE_BINARY_DIR}/dep/libbson/src/bson
+)
+set(LIBBSON_LIBRARIES bson)
 
 add_subdirectory(third_party)
 add_subdirectory(config)
@@ -89,8 +94,8 @@ set(bsoncxx_sources
 
 include_directories(
     ${LIBBSON_INCLUDE_DIRS}
-    ${CMAKE_SOURCE_DIR}/src
-    ${CMAKE_BINARY_DIR}/src
+    ${PROJECT_SOURCE_DIR}/..
+    ${PROJECT_BINARY_DIR}/..
 )
 
 link_directories(${LIBBSON_LIBRARY_DIRS})
@@ -121,7 +126,8 @@ add_library(bsoncxx SHARED
     ${bsoncxx_sources}
 )
 
-set(bsoncxx_libs ${LIBBSON_LIBRARIES})
+set(bsoncxx_libs_static ${LIBBSON_LIBRARIES}_static)
+set(bsoncxx_libs_shared ${LIBBSON_LIBRARIES}_shared)
 
 set_target_properties(bsoncxx PROPERTIES
     OUTPUT_NAME bsoncxx
@@ -151,8 +157,8 @@ elseif (BSONCXX_POLY_USE_BOOST)
     target_include_directories(bsoncxx PUBLIC ${Boost_INCLUDE_DIRS})
 endif()
 
-target_link_libraries(bsoncxx_static ${bsoncxx_libs})
-target_link_libraries(bsoncxx PRIVATE ${bsoncxx_libs})
+target_link_libraries(bsoncxx_static ${bsoncxx_libs_static})
+target_link_libraries(bsoncxx PRIVATE ${bsoncxx_libs_shared})
 
 install(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
     DESTINATION ${BSONCXX_HEADER_INSTALL_DIR}
diff --git a/src/bsoncxx/test/CMakeLists.txt b/src/bsoncxx/test/CMakeLists.txt
index d1ea051..538ba52 100644
--- a/src/bsoncxx/test/CMakeLists.txt
+++ b/src/bsoncxx/test/CMakeLists.txt
@@ -13,7 +13,7 @@
 # limitations under the License.
 
 include_directories(
-    ${CMAKE_SOURCE_DIR}/src/third_party/catch/include
+    ${CMAKE_CURRENT_SOURCE_DIR}/../../third_party/catch/include
 )
 
 add_executable(test_bson
diff --git a/src/mongocxx/CMakeLists.txt b/src/mongocxx/CMakeLists.txt
index 6b89b42..1fa64e3 100644
--- a/src/mongocxx/CMakeLists.txt
+++ b/src/mongocxx/CMakeLists.txt
@@ -16,11 +16,21 @@ project(MONGOCXX)
 
 set(LIBBSON_REQUIRED_VERSION 1.3.2)
 set(LIBBSON_REQUIRED_ABI_VERSION 1.0)
-find_package(LibBSON ${LIBBSON_REQUIRED_VERSION} REQUIRED)
+#find_package(LibBSON ${LIBBSON_REQUIRED_VERSION} REQUIRED)
+set(LIBBSON_INCLUDE_DIRS
+    ${CMAKE_SOURCE_DIR}/dep/libbson/src/bson
+    ${CMAKE_BINARY_DIR}/dep/libbson/src/bson
+)
+set(LIBBSON_LIBRARIES bson)
 
 set(LIBMONGOC_REQUIRED_VERSION 1.3.2)
 set(LIBMONGOC_REQUIRED_ABI_VERSION 1.0)
-find_package(LibMongoC ${LIBMONGOC_REQUIRED_VERSION} REQUIRED)
+#find_package(LibMongoC ${LIBMONGOC_REQUIRED_VERSION} REQUIRED)
+set(LIBMONGOC_INCLUDE_DIRS
+    ${CMAKE_SOURCE_DIR}/dep/mongo-c-driver/src/mongoc
+    ${CMAKE_BINARY_DIR}/dep/mongo-c-driver/src/mongoc
+)
+set(LIBMONGOC_LIBRARIES mongoc)
 
 # Update these as needed.
 # TODO: read from file
@@ -92,8 +102,8 @@ set(mongocxx_sources
 include_directories(
     ${LIBBSON_INCLUDE_DIRS}
     ${LIBMONGOC_INCLUDE_DIRS}
-    ${CMAKE_SOURCE_DIR}/src
-    ${CMAKE_BINARY_DIR}/src
+    ${PROJECT_SOURCE_DIR}/..
+    ${PROJECT_BINARY_DIR}/..
 )
 
 link_directories(
@@ -155,11 +165,12 @@ generate_export_header (mongocxx
     STATIC_DEFINE MONGOCXX_STATIC
 )
 
-set(mongocxx_libs ${LIBMONGOC_LIBRARIES} ${LIBBSON_LIBRARIES})
+set(mongocxx_libs_static ${LIBMONGOC_LIBRARIES}_static ${LIBBSON_LIBRARIES}_static)
+set(mongocxx_libs_shared ${LIBMONGOC_LIBRARIES}_shared ${LIBBSON_LIBRARIES}_shared)
 
-target_link_libraries(mongocxx_static bsoncxx_static ${mongocxx_libs})
-target_link_libraries(mongocxx_mocked bsoncxx_static ${mongocxx_libs})
-target_link_libraries(mongocxx PUBLIC bsoncxx PRIVATE ${mongocxx_libs})
+target_link_libraries(mongocxx_static bsoncxx_static ${mongocxx_libs_static})
+target_link_libraries(mongocxx_mocked bsoncxx_static ${mongocxx_libs_static})
+target_link_libraries(mongocxx PUBLIC bsoncxx PRIVATE ${mongocxx_libs_shared})
 
 install(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
     DESTINATION ${MONGOCXX_HEADER_INSTALL_DIR}
